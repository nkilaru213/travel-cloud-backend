Purpose

The goal of this initiative is to ensure business continuity in provisioning AWS Workspaces. While the platform is developing an automated process leveraging ServiceNow bulk upload, there must be a fallback backend mechanism to handle provisioning in case the primary automation fails. This approach safeguards against disruption, enabling seamless workspace creation and management across multiple AWS accounts.

⸻

Approach
	1.	Fallback Mechanism
	•	Introduce a script-driven backend process that can be invoked if the ServiceNow-driven automation is unavailable.
	•	Ensure the script is modular and reusable across multiple AWS accounts.
	2.	Data Source
	•	Leverage IDHub API as the single source of truth for active associates requiring workspace provisioning.
	3.	Workload Segmentation
	•	Split provisioning tasks into logical groups for efficiency and parallelism:
	•	5 groups for U.S. users
	•	1 group for International users
	•	This grouping enables distribution across AWS accounts and simplifies execution tracking.

⸻

Solution

Script Workflow

The fallback script will perform the following tasks step by step:
	1.	Data Retrieval
	•	Pull data from IDHub API to identify active associates requiring workspace provisioning.
	2.	Grouping
	•	Divide requests into 6 groups (5 U.S., 1 International) aligned to AWS account structure.
	3.	Report Generation
	•	Create CSV reports listing all workspace requests per group.
	•	Each CSV corresponds to one group (total = 6 CSV files).
	4.	File Distribution
	•	Publish CSV files to Amazon S3 within the respective AWS account for downstream processing.
	5.	Execution
	•	Script retrieves each CSV from S3.
	•	Reads workspace requests line by line and triggers AWS CLI provisioning commands accordingly.
	6.	Provisioning Commands
	•	Utilize AWS CLI to execute workspace creation based on metadata parameters in the CSV (e.g., user ID, bundle type, region, etc.).
	7.	Status & Notifications
	•	Monitor provisioning request status.
	•	Notify results via URI endpoint (e.g., callback service) and optionally via Email API for transparency and audit.

⸻

✅ Key Benefits
	•	Ensures business continuity even if ServiceNow bulk upload automation fails.
	•	Provides scalability via group-based segmentation and multi-account execution.
	•	Enhances traceability through generated reports, S3 storage, and notification mechanisms.
	•	Flexible enough to be executed on-demand or integrated into existing CI/CD or orchestration frameworks.
